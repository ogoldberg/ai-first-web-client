# Unbrowser API Server - Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# REQUIRED
# =============================================================================

# PostgreSQL connection string (Prisma)
DATABASE_URL=postgresql://user:password@localhost:5432/unbrowser

# =============================================================================
# OPTIONAL - Server
# =============================================================================

# Server port (Railway sets this automatically)
PORT=3001

# Environment: development | production
NODE_ENV=development

# =============================================================================
# OPTIONAL - Remote Browser (for Tier 3 Playwright rendering)
# Without this, only Tier 1-2 are available (works for most sites)
# =============================================================================

# Browserless.io - Recommended for Railway/serverless deployments
# Get a free token at https://browserless.io (6 hours/month free)
BROWSERLESS_TOKEN=
# BROWSERLESS_URL=wss://chrome.browserless.io

# Alternative: Bright Data Scraping Browser (better anti-bot)
# BRIGHTDATA_AUTH=customer_id:password
# BRIGHTDATA_ZONE=scraping_browser

# Alternative: Custom CDP endpoint
# BROWSER_ENDPOINT=wss://your-custom-endpoint

# =============================================================================
# OPTIONAL - Redis (for rate limiting, caching)
# Without Redis, rate limiting falls back to in-memory
# =============================================================================

# Option 1: Full Redis URL
REDIS_URL=redis://user:password@localhost:6379/0

# Option 2: Individual settings (if not using REDIS_URL)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
# REDIS_KEY_PREFIX=unbrowser:

# =============================================================================
# OPTIONAL - Stripe (for billing)
# Without Stripe, billing endpoints return "not configured"
# =============================================================================

STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_ID=price_...
STRIPE_METER_EVENT_NAME=unbrowser_requests

# =============================================================================
# OPTIONAL - Proxy Management (for IP rotation / anti-blocking)
# Without proxies, requests go direct (may get blocked on some sites)
# =============================================================================

# Datacenter proxies (comma-separated)
PROXY_DATACENTER_URLS=http://user:pass@dc1.proxy.com:8080

# ISP proxies (comma-separated)
PROXY_ISP_URLS=http://user:pass@isp1.proxy.com:8080

# Bright Data residential proxies
BRIGHTDATA_AUTH=customer_id:password
BRIGHTDATA_ZONE=residential
BRIGHTDATA_COUNTRY=us
# BRIGHTDATA_COUNTRIES=us,uk,de
# BRIGHTDATA_SESSION_ROTATION=true
# BRIGHTDATA_PORT=22225

# Proxy health tracking
# PROXY_HEALTH_WINDOW=100
# PROXY_COOLDOWN_MINUTES=60
# PROXY_BLOCK_THRESHOLD=0.3
# DOMAIN_RISK_CACHE_MINUTES=60
# DOMAIN_RISK_LEARNING=true

# =============================================================================
# OPTIONAL - Browser/Learning Settings
# =============================================================================

# Session storage directory
SESSIONS_DIR=./sessions

# Learning engine knowledge base path
LEARNING_ENGINE_PATH=./enhanced-knowledge-base.json

# Disable features (set to 'true' to disable)
# DISABLE_PROCEDURAL_MEMORY=false
# DISABLE_LEARNING=false

# =============================================================================
# OPTIONAL - Authentication (for Dashboard/Signup)
# Without these, dashboard features are disabled
# =============================================================================

# Session secret for signing cookies (generate with: openssl rand -base64 32)
SESSION_SECRET=your-session-secret-here-generate-a-real-one

# App URL (for OAuth callbacks and email verification links)
APP_URL=https://api.unbrowser.ai

# Resend email service (for verification emails)
# Get a free API key at https://resend.com (100 emails/day free)
RESEND_API_KEY=re_xxxxx
EMAIL_FROM=noreply@unbrowser.ai

# OAuth - Google (optional, for "Sign in with Google")
# Create credentials at https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=xxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-xxxxx

# OAuth - GitHub (optional, for "Sign in with GitHub")
# Create OAuth app at https://github.com/settings/developers
GITHUB_CLIENT_ID=xxxxx
GITHUB_CLIENT_SECRET=xxxxx
